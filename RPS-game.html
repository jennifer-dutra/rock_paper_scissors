<!DOCTYPE html>
<html>
  <body>
    <h1>Rock Paper Scissors</h1>
    <div class="btn-container">
      <button id="rockBtn" value="rock">Rock</button>
      <button id="paperBtn" value="paper">Paper</button>
      <button id="scissorsBtn" value="scissors">Scissors</button>
    </div>
    <div class="status">
      <h4>Opponent's choice: </h4>
      <h3>Win/Lose/Tie</h3>
    </div>
    <div class="score">
    </div>

    <script>
      var computerWins = 0;
      var playerWins = 0;
      var rounds = 0;

      console.log('Let\'s lay rock, paper, scissors. Best out of 5.');

      // get user selection when they click a button and start round
      const buttons = document.querySelectorAll('button');
      buttons.forEach(button => button.addEventListener('click', (e) => {
        var playerSelection = button.value;
        if(rounds < 5) {
          console.log(playRound(playerSelection));
          rounds++;
        }
        else {
          console.log(gameOver());
        }
      }));

      // game loop - returns winner of tournament
      function gameOver() {
        if(playerWins > computerWins) return 'You won the tournament!';
        else if (playerWins < computerWins) return 'You lost the tournament, sorry!';
        else return 'Tournament tied!';
        rounds = 0;
      }

      function playRound(playerSelection) {
        var computerSelection = computerPlay();
        console.log('Computer: ' + computerSelection);
        console.log('You chose: ' + playerSelection);

        // return results of round
        if(playerSelection === computerSelection) {
          return 'Tie!';
        }
        else if(playerSelection === 'rock' && computerSelection === 'paper') {
          computerWins++;
          return 'You lose! Paper beats rock.';
        }
        else if (playerSelection === 'rock' && computerSelection === 'scissors') {
          playerWins++;
          return 'You win! Rock beats scissors';
        }
        else if(playerSelection === 'paper' && computerSelection === 'rock') {
          playerWins++;
          return 'You win! Paper beats rock.';
        }
        else if (playerSelection === 'paper' && computerSelection === 'scissors') {
          computerWins++;
          return 'You lose! Scissors beats paper.';
        }
        else if(playerSelection === 'scissors' && computerSelection === 'rock') {
          computerWins++;
          return 'You lose! Rock beats scissors.';
        }
        else if (playerSelection === 'scissors' && computerSelection === 'paper') {
          playerWins++;
          return 'You win! Scissors beats paper.';
        }
      }

      // randomly pick for computer
      function computerPlay() {
        var choice = Math.floor(Math.random() * 3);
        if(choice === 0)  return 'rock';
        else if(choice === 1) return 'paper';
        else return 'scissors';
      }

    </script>
  </body>
</html>
